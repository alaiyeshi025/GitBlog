* 目录                                                                  :TOC:
- [[#异步执行][异步执行]]
- [[#installation-in-linux][Installation in Linux]]
  - [[#configure][configure]]
  - [[#作为-service-启动][作为 service 启动]]
- [[#helm-补全当前条目][Helm 补全当前条目]]
- [[#eaf-在-vnc4server-中有问题][EAF 在 vnc4server 中有问题]]
- [[#emacs输入utf8特殊字符快捷键][Emacs输入utf8特殊字符快捷键]]
- [[#去除-buffer-中各种-whitespace-问题][去除 buffer 中各种 whitespace 问题]]
- [[#emacs-dashboard同treemacs整合][Emacs dashboard同treemacs整合]]
- [[#emacs-dashboard的project不显示所有projectile-bookmarkseld中的项目][Emacs dashboard的project不显示所有projectile-bookmarks.eld中的项目]]

* 异步执行
  #+begin_src emacs-lisp
    (async-start-process NAME PROCESS FINISH-FUNC) ;;FINISH-FUNC 为回调函数 Emacs version 26.3
  #+end_src
* Installation in Linux
** configure
   - sudo apt install libgtk2.0-dev
   - sudo apt install libxpm-dev
   - sudo apt install libjpeg62-dev
   - sudo apt install libgif-dev
   - sudo apt install libtiff5-dev
   - sudo apt install gnutls-dev
   - sudo apt install libncurses-dev
   - sudo apt install mailutils
   - sudo apt install libxml2-dev
   - ./configure --with-mailutils --with-modules
** 作为 service 启动
   #+begin_quote
   Systemd is the supported method of running applications at startup on most Linux distributions. The following configuration file emacs.service will be included in the standard Emacs installation as of 26.1. All you need to do is copy this to ~/.config/systemd/user/emacs.service .

   [Unit]

   Description=Emacs text editor

   Documentation=info:emacs man:emacs(1) https://gnu.org/software/emacs/

   [Service]

   Type=forking

   ExecStart=/usr/local/bin/emacs --daemon

   ExecStop=/usr/local/bin/emacsclient --eval "(kill-emacs)"

   Environment=SSH_AUTH_SOCK=%t/keyring/ssh

   Restart=on-failure

   [Install]

   WantedBy=default.target

   Enable the unit by running:

   systemctl enable --user emacs

   systemctl start --user emacs

   -- from EmacsWiki
   #+end_quote
* Helm 补全当前条目
  C-j 这样可以避免中文名输入的麻烦，以及有的时候（例如treemacs）会混淆文件和文件夹了。
* EAF 在 vnc4server 中有问题
  vnc4server 似乎对 Xorg 支持不好，运行不起来。改为 TigerVNC 后，问题解决……
* Emacs输入utf8特殊字符快捷键
  C-x 8 RET,Helm可补全字符名等
* 去除 buffer 中各种 whitespace 问题
  M-x whitespace-cleanup
  whitespace 的自动清理会和 auto-save 冲突，且 cleanup 动作不需要频繁进行。故手动执行。
* Emacs dashboard同treemacs整合
  Treemacs的know projects cache文件和projectile不同，而dashboard默认是读projectile的。因而增加相关hook：
  #+begin_src emacs-lisp
    (add-hook 'treemacs-create-project-functions
              #'(lambda (project) (projectile-add-known-project (treemacs-project->path project))))

    (add-hook 'treemacs-delete-project-functions
              #'(lambda (project)
                  (interactive "x") ;;由于projectile-remove-known-project必须interactively called，project是一个struct类型，故code letter用"x"。另，treemacs-project->path 返回的path路径没有用缩写，最后也不带"/"，故需要转换。
                  (projectile-remove-known-project
                   (file-name-as-directory (abbreviate-file-name (treemacs-project->path project))))))
  #+end_src
* Emacs dashboard的project不显示所有projectile-bookmarks.eld中的项目
  #+begin_src emacs-lisp
    (setq projectile-current-project-on-switch 'keep)
  #+end_src
